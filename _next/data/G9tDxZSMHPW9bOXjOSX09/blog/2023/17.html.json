{"pageProps":{"postData":{"birthtime":"2023-05-02T01:32:57.638Z","mtime":"2023-05-02T01:32:57.638Z","slug":"2023/17","wordCount":687,"contentHtml":"<h2>引言</h2>\n<p>我们已经将博客数据填充到索引页面中，但我们还没有创建单独的博客页面。我们希望这些页面的 URL 获取博客数据，这意味着我们需要使用动态路由。</p>\n<p>在本课程中，您将学习：</p>\n<ul>\n<li>如何使用 getStaticPaths 静态生成具有动态路由的页面。</li>\n<li>如何编写 getStaticProps 来获取每篇博客文章的数据。</li>\n<li>如何使用 remark 渲染 markdown。</li>\n<li>如何漂亮地打印日期字符串。</li>\n<li>如何链接到具有动态路由的页面。</li>\n<li>关于动态路由的一些有用信息。</li>\n</ul>\n<h2>页面路径获取外部数据</h2>\n<p>在上一个课程中，我们讨论了页面内容获取外部数据的情况。我们使用getStaticProps获取所需数据来渲染索引页面。</p>\n<p>在本课程中，我们将讨论每个页面路径获取外部数据的情况。Next.js允许您静态生成具有依赖于外部数据的路径的页面。这使得Next.js中的动态URL成为可能。</p>\n<h2>如何使用动态路由静态生成页面</h2>\n<p>在我们的情况下，我们想要为博客文章创建动态路由：</p>\n<p>我们希望每篇文章的路径为 <code>/posts/</code> ，其中是顶级 posts 目录下的 markdown 文件名。 由于我们有 <code>first.md</code> 和 <code>about.md</code> ，我们希望路径为 <code>/posts/first</code> 和 <code>/posts/about</code> 。 步骤概览 我们可以通过执行以下步骤来实现。您现在不必进行这些更改 - 我们将在下一页上完成全部。</p>\n<p>首先，我们将在 <code>pages/posts</code> 下创建名为 <code>[id].js</code> 的页面。以 <code>[</code> 开头并以 <code>]</code> 结尾的页面是 <code>Next.js</code> 中的动态路由。</p>\n<p>在 <code>pages/posts/[id].js</code> 中，我们将编写代码，该代码将呈现一个帖子页面，就像我们创建的其他页面一样。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token maybe-class-name\">Layout</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'../../components/layout'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token operator\">&#x3C;</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span><span class=\"token spread operator\">...</span><span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>现在有新内容：我们将从此页面导出一个名为 <code>getStaticPaths</code> 的异步函数。在此函数中，我们需要返回id的可能值列表。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token maybe-class-name\">Layout</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'../../components/layout'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token operator\">&#x3C;</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span><span class=\"token spread operator\">...</span><span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getStaticPaths</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Return a list of possible value for id</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>最后，我们需要重新实现 <code>getStaticProps</code> - 这次是为了获取给定id的博客文章所需的数据。 <code>getStaticProps</code> 被赋予 <code>params</code> ，其中包含id（因为文件名是 <code>[id].js</code> ）。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token maybe-class-name\">Layout</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'../../components/layout'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token operator\">&#x3C;</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span><span class=\"token spread operator\">...</span><span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getStaticPaths</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Return a list of possible value for id</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getStaticProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> params <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Fetch necessary data for the blog post using params.id</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>让我们在下一篇文章进行尝试！</p>\n","title":"Next.js 动态路由生成静态页面概述","date":"2023-03-30","category":"博客日记","tag":["Next.js","动态路由","静态页"]}},"__N_SSG":true}