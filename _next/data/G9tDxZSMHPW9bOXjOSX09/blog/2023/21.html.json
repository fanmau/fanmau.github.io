{"pageProps":{"postData":{"birthtime":"2023-05-02T01:32:57.638Z","mtime":"2023-05-02T01:32:57.638Z","slug":"2023/21","wordCount":545,"contentHtml":"<h2>添加文章页面的标题</h2>\n<p>在 <code>pages/posts/[id].js</code> 文件中，让我们使用文章数据添加 <code>title</code> 标签。您需要在文件顶部添加 <code>next/head</code> 的 <code>import</code> ，并通过更新 <code>Post</code> 组件添加 <code>title</code> 标签：</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token maybe-class-name\">Head</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'next/head'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> postData <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&#x3C;</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Add this &#x3C;Head> tag */</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&#x3C;</span><span class=\"token maybe-class-name\">Head</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&#x3C;</span>title<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>postData<span class=\"token punctuation\">.</span><span class=\"token property-access\">title</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span>\n      <span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Head</span><span class=\"token operator\">></span>\n\n      <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Keep the existing code here */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h2>格式化日期</h2>\n<p>要格式化日期，我们将使用 <code>date-fns</code> 库。首先，安装它：</p>\n<p>注意：这一步其实我们在项目一开始就已经做了，这里就不需要再安装 <code>date-fns</code> 库了，可以跳过安装 <code>date-fns</code> 这一步。</p>\n<ul>\n<li>第一篇文章 《 <a href=\"/blog/2023/6.html\">如何使用 Next.js 构建高效的博客网站</a> 》 里我们在 package.json 文件里添加的内容，就已经有 <code>date-fns</code> 了。</li>\n</ul>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\">npm install date<span class=\"token operator\">-</span>fns\n</code></pre></div>\n<p>接下来，创建一个叫做 <code>components/date.js</code> 的文件，并添加以下日期组件：</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> parseISO<span class=\"token punctuation\">,</span> format <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'date-fns'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword\">function</span> <span class=\"token known-class-name class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> dateString <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> date <span class=\"token operator\">=</span> <span class=\"token function\">parseISO</span><span class=\"token punctuation\">(</span>dateString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token operator\">&#x3C;</span>time dateTime<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>dateString<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> <span class=\"token string\">'LLLL d, yyyy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span>time<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>注意：您可以在 <a href=\"https://date-fns.org/v2.16.1/docs/format\">date-fns</a> 网站上查看不同的格式()字符串选项。</p>\n<p>现在，打开 <code>pages/posts/[id].js</code> ，添加一个 <code>Date</code> 组件的导入，在 <code>{postData.date}</code> 上使用它：</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Add this import</span>\n<span class=\"token keyword module\">import</span> <span class=\"token known-class-name class-name\">Date</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'../../components/date'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> postData <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&#x3C;</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Keep the existing code here */</span><span class=\"token punctuation\">}</span>\n\n      <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Replace {postData.date} with this */</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&#x3C;</span><span class=\"token known-class-name class-name\">Date</span> dateString<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>postData<span class=\"token punctuation\">.</span><span class=\"token property-access\">date</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n      <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Keep the existing code here */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>如果您访问 <code>http://localhost:3000/posts/pre-rendering</code> ，则现在应该看到日期已写为 <code>January 1, 2023</code> 。</p>\n<p>添加CSS</p>\n<p>最后，让我们使用我们之前添加的 <code>styles/utils.module.css</code> 文件添加一些CSS。打开 <code>pages/posts/[id].js</code> ，然后添加CSS文件的导入，并将 <code>Post</code> 组件替换为以下代码：</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword module\">import</span> <span class=\"token imports\">utilStyles</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'../../styles/utils.module.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> postData <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&#x3C;</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&#x3C;</span><span class=\"token maybe-class-name\">Head</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&#x3C;</span>title<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>postData<span class=\"token punctuation\">.</span><span class=\"token property-access\">title</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span>\n      <span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Head</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&#x3C;</span>article<span class=\"token operator\">></span>\n        <span class=\"token operator\">&#x3C;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>utilStyles<span class=\"token punctuation\">.</span><span class=\"token property-access\">headingXl</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>postData<span class=\"token punctuation\">.</span><span class=\"token property-access\">title</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n        <span class=\"token operator\">&#x3C;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>utilStyles<span class=\"token punctuation\">.</span><span class=\"token property-access\">lightText</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&#x3C;</span><span class=\"token known-class-name class-name\">Date</span> dateString<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>postData<span class=\"token punctuation\">.</span><span class=\"token property-access\">date</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&#x3C;</span>div dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> postData<span class=\"token punctuation\">.</span><span class=\"token property-access\">contentHtml</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\n    <span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Layout</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>如果您访问 <code>http://localhost:3000/posts/pre-rendering</code> ，则页面现在应该看起来更好：</p>\n<p>干得好！接下来我们将完善索引页面，然后就完成啦！</p>\n","title":"使用 Next.js 完善文章内容，添加标题和格式化日期","date":"2023-05-02","category":"博客日记","tag":["文章","标题","日期"]}},"__N_SSG":true}