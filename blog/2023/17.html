<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="twitter:card" content="summary_large_image"/><title>Next.js 动态路由生成静态页面概述 | FanMa</title><meta name="keywords" content="FanMa,博客,Next.js"/><meta property="og:type" content="website"/><meta property="og:site_name" content="FanMa"/><meta property="og:title" content="FanMa 博客"/><meta property="og:locale" content="zh-CN"/><meta property="og:url" content="https://fanmau.github.io"/><meta property="og:image" content="https://fanmav.github.io/images/fanma.jpg"/><meta name="viewport" content="width=device-width, initial-scale=1"/><script type="application/ld+json">{
          "@context": "http://schema.org",
          "@type": "Article",
          "name": "FanMa",
          "headline": "Next.js 动态路由生成静态页面概述",
          "author": {
            "@type": "Person",
            "name": "黄胜丰",
            "url": "https://fanmav.github.io"
          },
          "datePublished": "2023-05-02T01:32:57.638Z",
          "image": "",
          "articleSection": "",
          "url": "https://fanmav.github.io/blog/2023/17.html"
        }
    </script><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/ecba3476100f022a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ecba3476100f022a.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b35e07f0771a75a0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b35e07f0771a75a0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-ac88a2a245aea9ab.js" defer=""></script><script src="/_next/static/chunks/main-04721928ae71efe1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a5c337602b2b8174.js" defer=""></script><script src="/_next/static/chunks/765-f88be7b9869573be.js" defer=""></script><script src="/_next/static/chunks/338-0e0ca1e58a2e5276.js" defer=""></script><script src="/_next/static/chunks/681-c132199fb3549349.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-b307b68a4a74a460.js" defer=""></script><script src="/_next/static/G9tDxZSMHPW9bOXjOSX09/_buildManifest.js" defer=""></script><script src="/_next/static/G9tDxZSMHPW9bOXjOSX09/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="fanma"><div class="maw"><nav class="nav"><ul class="nav-list"><li class="logo"><a href="/"><div class="logo-fw"><div class="logo-f"><div class="__className_2bdad4">F</div></div></div><div class="logo-link">FanMa</div></a></li><li class="menu"><a href="/blog.html">Blog</a></li></ul></nav><header class="header"><div class="works"><p>FanMa 博客 包含了关于前端学习的一系列内容，涵盖了 HTML、CSS、JavaScript、TypeScript、React、Next.js 等全栈方面的学习笔记。博客以技术为核心，深入浅出地讲解了这些技术的基础概念、实际应用以及最佳实践，并且结合了博主的个人经验和实践经历进行分享，有助于读者更好地理解和掌握这些技术。如果你有前端学习的需求或者对这些技术感兴趣，那么 FanMa 博客 将是帮助你实现这些目标的绝佳资源。</p></div></header><main class="main"><div class="book"><article><h1 class="title">Next.js 动态路由生成静态页面概述<div class="title-date"><small><time dateTime="2023-03-30">2023年03月30日</time> - <span>约 <!-- -->687<!-- --> 字</span></small></div></h1><div><h2>引言</h2>
<p>我们已经将博客数据填充到索引页面中，但我们还没有创建单独的博客页面。我们希望这些页面的 URL 获取博客数据，这意味着我们需要使用动态路由。</p>
<p>在本课程中，您将学习：</p>
<ul>
<li>如何使用 getStaticPaths 静态生成具有动态路由的页面。</li>
<li>如何编写 getStaticProps 来获取每篇博客文章的数据。</li>
<li>如何使用 remark 渲染 markdown。</li>
<li>如何漂亮地打印日期字符串。</li>
<li>如何链接到具有动态路由的页面。</li>
<li>关于动态路由的一些有用信息。</li>
</ul>
<h2>页面路径获取外部数据</h2>
<p>在上一个课程中，我们讨论了页面内容获取外部数据的情况。我们使用getStaticProps获取所需数据来渲染索引页面。</p>
<p>在本课程中，我们将讨论每个页面路径获取外部数据的情况。Next.js允许您静态生成具有依赖于外部数据的路径的页面。这使得Next.js中的动态URL成为可能。</p>
<h2>如何使用动态路由静态生成页面</h2>
<p>在我们的情况下，我们想要为博客文章创建动态路由：</p>
<p>我们希望每篇文章的路径为 <code>/posts/</code> ，其中是顶级 posts 目录下的 markdown 文件名。 由于我们有 <code>first.md</code> 和 <code>about.md</code> ，我们希望路径为 <code>/posts/first</code> 和 <code>/posts/about</code> 。 步骤概览 我们可以通过执行以下步骤来实现。您现在不必进行这些更改 - 我们将在下一页上完成全部。</p>
<p>首先，我们将在 <code>pages/posts</code> 下创建名为 <code>[id].js</code> 的页面。以 <code>[</code> 开头并以 <code>]</code> 结尾的页面是 <code>Next.js</code> 中的动态路由。</p>
<p>在 <code>pages/posts/[id].js</code> 中，我们将编写代码，该代码将呈现一个帖子页面，就像我们创建的其他页面一样。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Layout</span></span> <span class="token keyword module">from</span> <span class="token string">'../../components/layout'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Post</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Layout</span><span class="token operator">></span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Layout</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>现在有新内容：我们将从此页面导出一个名为 <code>getStaticPaths</code> 的异步函数。在此函数中，我们需要返回id的可能值列表。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Layout</span></span> <span class="token keyword module">from</span> <span class="token string">'../../components/layout'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Post</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Layout</span><span class="token operator">></span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Layout</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticPaths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Return a list of possible value for id</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>最后，我们需要重新实现 <code>getStaticProps</code> - 这次是为了获取给定id的博客文章所需的数据。 <code>getStaticProps</code> 被赋予 <code>params</code> ，其中包含id（因为文件名是 <code>[id].js</code> ）。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Layout</span></span> <span class="token keyword module">from</span> <span class="token string">'../../components/layout'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Post</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Layout</span><span class="token operator">></span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Layout</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticPaths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Return a list of possible value for id</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Fetch necessary data for the blog post using params.id</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>让我们在下一篇文章进行尝试！</p>
</div></article></div></main><div class="back"><a href="/">← Back to home</a></div><footer class="footer">Copyright © 1985-2023 FanMa All Rights Reserved.</footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"birthtime":"2023-05-02T01:32:57.638Z","mtime":"2023-05-02T01:32:57.638Z","slug":"2023/17","wordCount":687,"contentHtml":"\u003ch2\u003e引言\u003c/h2\u003e\n\u003cp\u003e我们已经将博客数据填充到索引页面中，但我们还没有创建单独的博客页面。我们希望这些页面的 URL 获取博客数据，这意味着我们需要使用动态路由。\u003c/p\u003e\n\u003cp\u003e在本课程中，您将学习：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e如何使用 getStaticPaths 静态生成具有动态路由的页面。\u003c/li\u003e\n\u003cli\u003e如何编写 getStaticProps 来获取每篇博客文章的数据。\u003c/li\u003e\n\u003cli\u003e如何使用 remark 渲染 markdown。\u003c/li\u003e\n\u003cli\u003e如何漂亮地打印日期字符串。\u003c/li\u003e\n\u003cli\u003e如何链接到具有动态路由的页面。\u003c/li\u003e\n\u003cli\u003e关于动态路由的一些有用信息。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e页面路径获取外部数据\u003c/h2\u003e\n\u003cp\u003e在上一个课程中，我们讨论了页面内容获取外部数据的情况。我们使用getStaticProps获取所需数据来渲染索引页面。\u003c/p\u003e\n\u003cp\u003e在本课程中，我们将讨论每个页面路径获取外部数据的情况。Next.js允许您静态生成具有依赖于外部数据的路径的页面。这使得Next.js中的动态URL成为可能。\u003c/p\u003e\n\u003ch2\u003e如何使用动态路由静态生成页面\u003c/h2\u003e\n\u003cp\u003e在我们的情况下，我们想要为博客文章创建动态路由：\u003c/p\u003e\n\u003cp\u003e我们希望每篇文章的路径为 \u003ccode\u003e/posts/\u003c/code\u003e ，其中是顶级 posts 目录下的 markdown 文件名。 由于我们有 \u003ccode\u003efirst.md\u003c/code\u003e 和 \u003ccode\u003eabout.md\u003c/code\u003e ，我们希望路径为 \u003ccode\u003e/posts/first\u003c/code\u003e 和 \u003ccode\u003e/posts/about\u003c/code\u003e 。 步骤概览 我们可以通过执行以下步骤来实现。您现在不必进行这些更改 - 我们将在下一页上完成全部。\u003c/p\u003e\n\u003cp\u003e首先，我们将在 \u003ccode\u003epages/posts\u003c/code\u003e 下创建名为 \u003ccode\u003e[id].js\u003c/code\u003e 的页面。以 \u003ccode\u003e[\u003c/code\u003e 开头并以 \u003ccode\u003e]\u003c/code\u003e 结尾的页面是 \u003ccode\u003eNext.js\u003c/code\u003e 中的动态路由。\u003c/p\u003e\n\u003cp\u003e在 \u003ccode\u003epages/posts/[id].js\u003c/code\u003e 中，我们将编写代码，该代码将呈现一个帖子页面，就像我们创建的其他页面一样。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eLayout\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../../components/layout'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003e\u003cspan class=\"token maybe-class-name\"\u003ePost\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eLayout\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eLayout\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e现在有新内容：我们将从此页面导出一个名为 \u003ccode\u003egetStaticPaths\u003c/code\u003e 的异步函数。在此函数中，我们需要返回id的可能值列表。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eLayout\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../../components/layout'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003e\u003cspan class=\"token maybe-class-name\"\u003ePost\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eLayout\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eLayout\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egetStaticPaths\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// Return a list of possible value for id\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e最后，我们需要重新实现 \u003ccode\u003egetStaticProps\u003c/code\u003e - 这次是为了获取给定id的博客文章所需的数据。 \u003ccode\u003egetStaticProps\u003c/code\u003e 被赋予 \u003ccode\u003eparams\u003c/code\u003e ，其中包含id（因为文件名是 \u003ccode\u003e[id].js\u003c/code\u003e ）。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eLayout\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../../components/layout'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003e\u003cspan class=\"token maybe-class-name\"\u003ePost\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eLayout\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eLayout\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egetStaticPaths\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// Return a list of possible value for id\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egetStaticProps\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e params \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// Fetch necessary data for the blog post using params.id\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e让我们在下一篇文章进行尝试！\u003c/p\u003e\n","title":"Next.js 动态路由生成静态页面概述","date":"2023-03-30","category":"博客日记","tag":["Next.js","动态路由","静态页"]}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["2023","17.html"]},"buildId":"G9tDxZSMHPW9bOXjOSX09","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>